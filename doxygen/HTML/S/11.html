<html>
<head>
<title>device/msp430dev/launchpad.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/212.html'>device</a>/<a href='../files/213.html'>msp430dev</a>/launchpad.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L9'>[^]</a><a href='#L144'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L9' title='Defined at 9.'>desabWDT</a>
<li><a href='#L19' title='Defined at 19.'>botao</a>
<li><a href='#L36' title='Defined at 36.'>hled</a>
<li><a href='#L42' title='Defined at 42.'>readbotao</a>
<li><a href='#L55' title='Defined at 55.'>waitbton</a>
<li><a href='#L66' title='Defined at 66.'>ligled</a>
<li><a href='#L72' title='Defined at 72.'>desled</a>
<li><a href='#L78' title='Defined at 78.'>alterled</a>
<li><a href='#L84' title='Defined at 84.'>dly_coxa</a>
<li><a href='#L97' title='Defined at 97.'>dco1mhz</a>
<li><a href='#L121' title='Defined at 121.'>hserial</a>
<li><a href='#L134' title='Defined at 134.'>rcserial</a>
<li><a href='#L139' title='Defined at 139.'>wcserial</a>
<li><a href='#L144' title='Defined at 144.'>wsserial</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 <font color='darkred'>#include</font>&lt;msp430g2553.h&gt;
<a name='L2'>   2 <font color='darkred'>#include</font>&lt;string.h&gt;
<a name='L3'>   3 <font color='darkred'>#include</font> "<a href='14.html'>launchpad.h</a>"
<a name='L4'>   4 
<a name='L5'>   5 <i><font color='green'>/**</font></i>
<a name='L6'>   6 <i><font color='green'> * @brief Desable Watchdog</font></i>
<a name='L7'>   7 <i><font color='green'> * @details Call to desable the Whatchdog</font></i>
<a name='L8'>   8 <i><font color='green'> */</font></i>
<a name='L9'>   9 <b>void</b> <a href='../R/1273.html' title='Multiple refered from 2 places.'>desabWDT</a>()
<a name='L10'>  10 <font color='red'>{</font>
<a name='L11'>  11         WDTCTL = WDTPW|WDTHOLD;
<a name='L12'>  12 <font color='red'>}</font>
<a name='L13'>  13 
<a name='L14'>  14 <i><font color='green'>// habilita botão sem interrupção</font></i>
<a name='L15'>  15 <i><font color='green'>/**</font></i>
<a name='L16'>  16 <i><font color='green'> * @brief Enable the button</font></i>
<a name='L17'>  17 <i><font color='green'> * @details Enable the button without the interruption support</font></i>
<a name='L18'>  18 <i><font color='green'> */</font></i>
<a name='L19'>  19 <b>void</b> <a href='../S/14.html#L29' title='Refered from 29 in device/msp430dev/launchpad.h.'>botao</a>()
<a name='L20'>  20 <font color='red'>{</font>
<a name='L21'>  21         <a href='../Y/1565.html' title='Multiple used in 2 places.'>P1DIR</a> &amp;= ~<a href='../S/14.html#L5' title='Defined at 5 in device/msp430dev/launchpad.h.'>BOTAO</a>;
<a name='L22'>  22         <a href='../Y/1567.html' title='Multiple used in 4 places.'>P1OUT</a> |= <a href='../S/14.html#L5' title='Defined at 5 in device/msp430dev/launchpad.h.'>BOTAO</a>;
<a name='L23'>  23         P1REN |= <a href='../S/14.html#L5' title='Defined at 5 in device/msp430dev/launchpad.h.'>BOTAO</a>; 
<a name='L24'>  24 <font color='red'>}</font>
<a name='L25'>  25 
<a name='L26'>  26 
<a name='L27'>  27 <i><font color='green'>// habilitar led n</font></i>
<a name='L28'>  28 <i><font color='green'>/**</font></i>
<a name='L29'>  29 <i><font color='green'> * @brief Enable LED</font></i>
<a name='L30'>  30 <i><font color='green'> * @details Enable LED *n*, making this port a output port</font></i>
<a name='L31'>  31 <i><font color='green'> * </font></i>
<a name='L32'>  32 <i><font color='green'> * @param numled LED to be enabled. Can assume the values:</font></i>
<a name='L33'>  33 <i><font color='green'> *      +       LED1</font></i>
<a name='L34'>  34 <i><font color='green'> *      +       LED2</font></i>
<a name='L35'>  35 <i><font color='green'> */</font></i>
<a name='L36'>  36 <b>void</b> <a href='../R/1313.html' title='Multiple refered from 2 places.'>hled</a>(<b>unsigned</b> <b>char</b> <a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>)
<a name='L37'>  37 <font color='red'>{</font>
<a name='L38'>  38         <i><font color='green'>//numled é LED1 ou LED2</font></i>
<a name='L39'>  39         <a href='../Y/1565.html' title='Multiple used in 2 places.'>P1DIR</a>|=<a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>;          
<a name='L40'>  40 <font color='red'>}</font>
<a name='L41'>  41 <i><font color='green'>// sensibilidade ao botão</font></i>
<a name='L42'>  42 <b>char</b> <a href='../R/1422.html' title='Multiple refered from 3 places.'>readbotao</a>()
<a name='L43'>  43 <font color='red'>{</font>
<a name='L44'>  44         <b>unsigned</b> <b>volatile</b> <a href='../Y/4402.html' title='Multiple used in 4 places.'>sig</a>;
<a name='L45'>  45         <b>if</b> ((P1IN &amp; <a href='../S/14.html#L5' title='Defined at 5 in device/msp430dev/launchpad.h.'>BOTAO</a>) == <a href='../S/14.html#L5' title='Defined at 5 in device/msp430dev/launchpad.h.'>BOTAO</a>)
<a name='L46'>  46                 <a href='../Y/4402.html' title='Multiple used in 4 places.'>sig</a> = 1;
<a name='L47'>  47         <b>else</b>
<a name='L48'>  48                 <a href='../Y/4402.html' title='Multiple used in 4 places.'>sig</a> = 0;
<a name='L49'>  49                 
<a name='L50'>  50         <b>return</b> <a href='../Y/4402.html' title='Multiple used in 4 places.'>sig</a>;
<a name='L51'>  51                         
<a name='L52'>  52 <font color='red'>}</font>
<a name='L53'>  53 
<a name='L54'>  54 <i><font color='green'>// Esperar equanto botão não/é pressionao</font></i>
<a name='L55'>  55 <b>void</b> <a href='../S/14.html#L38' title='Refered from 38 in device/msp430dev/launchpad.h.'>waitbton</a>(<b>unsigned</b> <b>char</b> <a href='../Y/4408.html' title='Multiple used in 4 places.'>sinal</a>)
<a name='L56'>  56 <font color='red'>{</font>
<a name='L57'>  57         <b>if</b> (<a href='../Y/4408.html' title='Multiple used in 4 places.'>sinal</a>==<a href='../S/14.html#L7' title='Defined at 7 in device/msp430dev/launchpad.h.'>SOLTA</a>)
<a name='L58'>  58                 <b>while</b>(!<a href='../S/11.html#L42' title='Defined at 42 in device/msp430dev/launchpad.c.'>readbotao</a>())
<a name='L59'>  59                 <font color='red'>{</font><font color='red'>}</font>
<a name='L60'>  60         <b>else</b> <b>if</b> (<a href='../Y/4408.html' title='Multiple used in 4 places.'>sinal</a> == <a href='../S/14.html#L6' title='Defined at 6 in device/msp430dev/launchpad.h.'>APERTA</a>)
<a name='L61'>  61                 <b>while</b>(<a href='../S/11.html#L42' title='Defined at 42 in device/msp430dev/launchpad.c.'>readbotao</a>())
<a name='L62'>  62                 <font color='red'>{</font><font color='red'>}</font>
<a name='L63'>  63 <font color='red'>}</font>
<a name='L64'>  64 
<a name='L65'>  65 <i><font color='green'>// Acender led</font></i>
<a name='L66'>  66 <b>void</b> <a href='../R/1325.html' title='Multiple refered from 2 places.'>ligled</a>(<b>char</b> <a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>)
<a name='L67'>  67 <font color='red'>{</font>
<a name='L68'>  68         <a href='../Y/1567.html' title='Multiple used in 4 places.'>P1OUT</a> |= <a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>;
<a name='L69'>  69 <font color='red'>}</font>
<a name='L70'>  70 
<a name='L71'>  71 <i><font color='green'>// Apagar led</font></i>
<a name='L72'>  72 <b>void</b> <a href='../R/1274.html' title='Multiple refered from 3 places.'>desled</a>(<b>char</b> <a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>)
<a name='L73'>  73 <font color='red'>{</font>
<a name='L74'>  74         <a href='../Y/1567.html' title='Multiple used in 4 places.'>P1OUT</a> &amp;= ~<a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>;
<a name='L75'>  75 <font color='red'>}</font>
<a name='L76'>  76 
<a name='L77'>  77 <i><font color='green'>// Alternar led</font></i>
<a name='L78'>  78 <b>void</b> <a href='../S/14.html#L47' title='Refered from 47 in device/msp430dev/launchpad.h.'>alterled</a>(<b>unsigned</b> <b>volatile</b> <a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>)
<a name='L79'>  79 <font color='red'>{</font>
<a name='L80'>  80         <a href='../Y/1567.html' title='Multiple used in 4 places.'>P1OUT</a> ^= <a href='../Y/3797.html' title='Multiple used in 12 places.'>numled</a>;
<a name='L81'>  81 <font color='red'>}</font>
<a name='L82'>  82 
<a name='L83'>  83 <i><font color='green'>// delay coxa! -- count 1000</font></i>
<a name='L84'>  84 <b>void</b> <a href='../R/1277.html' title='Multiple refered from 4 places.'>dly_coxa</a>(<b>int</b> <a href='../Y/3795.html' title='Multiple used in 3 places.'>numcic</a>)
<a name='L85'>  85 <font color='red'>{</font>
<a name='L86'>  86         <b>volatile</b> <b>unsigned</b> <b>int</b> <a href='../Y/2917.html' title='Multiple used in 2 places.'>count1</a> = 0, <a href='../Y/2918.html' title='Multiple used in 2 places.'>count2</a> = 0;
<a name='L87'>  87         
<a name='L88'>  88         <b>for</b> (<a href='../Y/2917.html' title='Multiple used in 2 places.'>count1</a> = 0; <a href='../Y/2917.html' title='Multiple used in 2 places.'>count1</a>&lt; <a href='../Y/3795.html' title='Multiple used in 3 places.'>numcic</a>; <a href='../Y/2917.html' title='Multiple used in 2 places.'>count1</a>++)
<a name='L89'>  89         <font color='red'>{</font>
<a name='L90'>  90                 <b>for</b>(<a href='../Y/2918.html' title='Multiple used in 2 places.'>count2</a> = 0; <a href='../Y/2918.html' title='Multiple used in 2 places.'>count2</a> &lt; 1000; <a href='../Y/2918.html' title='Multiple used in 2 places.'>count2</a>++)
<a name='L91'>  91                 <font color='red'>{</font>
<a name='L92'>  92                 <font color='red'>}</font>
<a name='L93'>  93         <font color='red'>}</font>
<a name='L94'>  94 <font color='red'>}</font>
<a name='L95'>  95 
<a name='L96'>  96 <i><font color='green'>// configurar clock em 1MHz</font></i>
<a name='L97'>  97 <b>void</b> <a href='../R/1255.html' title='Multiple refered from 2 places.'>dco1mhz</a>()
<a name='L98'>  98 <font color='red'>{</font>
<a name='L99'>  99         <i><font color='green'>// BASEADO EM EXEMPLOS  </font></i>
<a name='L100'> 100         
<a name='L101'> 101         <a href='../Y/323.html' title='Multiple used in 2 places.'>DCOCTL</a> = 0;                             
<a name='L102'> 102         BCSCTL1 = CALBC1_1MHZ;                  
<a name='L103'> 103         <a href='../Y/323.html' title='Multiple used in 2 places.'>DCOCTL</a> = CALDCO_1MHZ;
<a name='L104'> 104 <font color='red'>}</font>
<a name='L105'> 105 
<a name='L106'> 106 <i><font color='green'>/**</font></i>
<a name='L107'> 107 <i><font color='green'> * @brief Configure UART</font></i>
<a name='L108'> 108 <i><font color='green'> * @details Configure UART with 9600 baud rate</font></i>
<a name='L109'> 109 <i><font color='green'> * \f$UCA0BR_{value}= \frac{Frequency}{Rate_{desired}} \f$</font></i>
<a name='L110'> 110 <i><font color='green'> * </font></i>
<a name='L111'> 111 <i><font color='green'> * To a Baud Rate = 9600 and 1MHz as clock we have:</font></i>
<a name='L112'> 112 <i><font color='green'> * \f$\frac{1\cdot 10^6}{9600} = 104,166 \f$</font></i>
<a name='L113'> 113 <i><font color='green'> * </font></i>
<a name='L114'> 114 <i><font color='green'> * So:</font></i>
<a name='L115'> 115 <i><font color='green'> * + UCA0BR1 = 0;</font></i>
<a name='L116'> 116 <i><font color='green'> * + UCA0BR0 = 104;</font></i>
<a name='L117'> 117 <i><font color='green'> * + Error = 1.6%</font></i>
<a name='L118'> 118 <i><font color='green'> * </font></i>
<a name='L119'> 119 <i><font color='green'> * [Source](http://www.win.tue.nl/~johanl/educ/RTcourse/MSP430%20UART.pdf)</font></i>
<a name='L120'> 120 <i><font color='green'> */</font></i>
<a name='L121'> 121 <b>void</b> <a href='../R/1314.html' title='Multiple refered from 2 places.'>hserial</a>()
<a name='L122'> 122 <font color='red'>{</font>
<a name='L123'> 123         P1SEL |= <a href='../S/14.html#L20' title='Defined at 20 in device/msp430dev/launchpad.h.'>PIN_TX</a> + <a href='../S/14.html#L21' title='Defined at 21 in device/msp430dev/launchpad.h.'>PIN_RX</a> ;                     <i><font color='green'>// P1.1 = RXD, P1.2=TXD</font></i>
<a name='L124'> 124         P1SEL2 |= <a href='../S/14.html#L20' title='Defined at 20 in device/msp430dev/launchpad.h.'>PIN_TX</a> + <a href='../S/14.html#L21' title='Defined at 21 in device/msp430dev/launchpad.h.'>PIN_RX</a> ;                    <i><font color='green'>// P1.1 = RXD, P1.2=TXD</font></i>
<a name='L125'> 125   
<a name='L126'> 126         <a href='../Y/2316.html' title='Multiple used in 2 places.'>UCA0CTL1</a> |= UCSSEL_2;                     <i><font color='green'>// SMCLK</font></i>
<a name='L127'> 127         UCA0BR0 = 104;                            <i><font color='green'>// 1MHz 9600</font></i>
<a name='L128'> 128         UCA0BR1 = 0;                              <i><font color='green'>// 1MHz 9600</font></i>
<a name='L129'> 129         UCA0MCTL = UCBRS0;                        <i><font color='green'>// Modulation UCBRSx = 1</font></i>
<a name='L130'> 130         <a href='../Y/2316.html' title='Multiple used in 2 places.'>UCA0CTL1</a> &amp;= ~UCSWRST;                     <i><font color='green'>// **Initialize USCI state machine**</font></i>
<a name='L131'> 131 <font color='red'>}</font>
<a name='L132'> 132 
<a name='L133'> 133 <i><font color='green'>//le um char da uart</font></i>
<a name='L134'> 134 <b>char</b> <a href='../R/1419.html' title='Multiple refered from 3 places.'>rcserial</a>()
<a name='L135'> 135 <font color='red'>{</font>
<a name='L136'> 136         <b>return</b> UCA0RXBUF;
<a name='L137'> 137 <font color='red'>}</font>
<a name='L138'> 138 
<a name='L139'> 139 <b>void</b> <a href='../R/1479.html' title='Multiple refered from 2 places.'>wcserial</a>(<b>char</b> <a href='../Y/2821.html' title='Multiple used in 3 places.'>caracter</a>)
<a name='L140'> 140 <font color='red'>{</font>
<a name='L141'> 141         UCA0TXBUF = <a href='../Y/2821.html' title='Multiple used in 3 places.'>caracter</a>;
<a name='L142'> 142 <font color='red'>}</font>
<a name='L143'> 143 
<a name='L144'> 144 <b>void</b> <a href='../R/1481.html' title='Multiple refered from 3 places.'>wsserial</a>(<b>char</b> *<a href='../Y/4451.html' title='Multiple used in 5 places.'>st</a>)
<a name='L145'> 145 <font color='red'>{</font>
<a name='L146'> 146         <b>volatile</b> <b>int</b> <a href='../Y/2898.html' title='Multiple used in 3 places.'>cont</a> = 0, <a href='../Y/3557.html' title='Multiple used in 139 places.'>len</a> = <a href='../Y/4500.html' title='Multiple used in 11 places.'>strlen</a>(<a href='../Y/4451.html' title='Multiple used in 5 places.'>st</a>);
<a name='L147'> 147         
<a name='L148'> 148         <b>for</b>(<a href='../Y/2898.html' title='Multiple used in 3 places.'>cont</a>=0; <a href='../Y/2898.html' title='Multiple used in 3 places.'>cont</a>&lt;<a href='../Y/3557.html' title='Multiple used in 139 places.'>len</a>; <a href='../Y/2898.html' title='Multiple used in 3 places.'>cont</a>++)
<a name='L149'> 149                 <font color='red'>{</font>
<a name='L150'> 150                         <a href='../S/11.html#L139' title='Defined at 139 in device/msp430dev/launchpad.c.'>wcserial</a>(<a href='../Y/4451.html' title='Multiple used in 5 places.'>st</a>[<a href='../Y/2898.html' title='Multiple used in 3 places.'>cont</a>]);
<a name='L151'> 151                         <a href='../S/11.html#L84' title='Defined at 84 in device/msp430dev/launchpad.c.'>dly_coxa</a>(1);
<a name='L152'> 152                 <font color='red'>}</font>
<a name='L153'> 153 <font color='red'>}</font>
<a name='L154'> 154 
<a name='L155'> 155 
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L9'>[^]</a><a href='#L144'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
