<html>
<head>
<title>ovr/sdk/src/OVR_SensorTimeFilter.h</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/215.html'>ovr</a>/<a href='../files/216.html'>sdk</a>/<a href='../files/218.html'>src</a>/OVR_SensorTimeFilter.h</h2>
<i><font color='green'>/* [&lt;][&gt;][^][v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2><a href='../J/130.html' title='Multiple included from 2 places.'>INCLUDED FROM</a></h2>
<hr>
<pre>
<a name='L1'>   1 <i><font color='green'>/************************************************************************************</font></i>
<a name='L2'>   2 <i><font color='green'></font></i>
<a name='L3'>   3 <i><font color='green'>PublicHeader:   None</font></i>
<a name='L4'>   4 <i><font color='green'>Filename    :   OVR_SensorTimeFilter.h</font></i>
<a name='L5'>   5 <i><font color='green'>Content     :   Class to filter HMD time and convert it to system time</font></i>
<a name='L6'>   6 <i><font color='green'>Created     :   December 20, 2013</font></i>
<a name='L7'>   7 <i><font color='green'>Author      :   Michael Antonov</font></i>
<a name='L8'>   8 <i><font color='green'>Notes       :</font></i>
<a name='L9'>   9 <i><font color='green'></font></i>
<a name='L10'>  10 <i><font color='green'>Copyright   :   Copyright 2014 Oculus VR, Inc. All Rights reserved.</font></i>
<a name='L11'>  11 <i><font color='green'></font></i>
<a name='L12'>  12 <i><font color='green'>Licensed under the Oculus VR Rift SDK License Version 3.1 (the "License"); </font></i>
<a name='L13'>  13 <i><font color='green'>you may not use the Oculus VR Rift SDK except in compliance with the License, </font></i>
<a name='L14'>  14 <i><font color='green'>which is provided at the time of installation or download, or which </font></i>
<a name='L15'>  15 <i><font color='green'>otherwise accompanies this software in either electronic or hard copy form.</font></i>
<a name='L16'>  16 <i><font color='green'></font></i>
<a name='L17'>  17 <i><font color='green'>You may obtain a copy of the License at</font></i>
<a name='L18'>  18 <i><font color='green'></font></i>
<a name='L19'>  19 <i><font color='green'>http://www.oculusvr.com/licenses/LICENSE-3.1 </font></i>
<a name='L20'>  20 <i><font color='green'></font></i>
<a name='L21'>  21 <i><font color='green'>Unless required by applicable law or agreed to in writing, the Oculus VR SDK </font></i>
<a name='L22'>  22 <i><font color='green'>distributed under the License is distributed on an "AS IS" BASIS,</font></i>
<a name='L23'>  23 <i><font color='green'>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</font></i>
<a name='L24'>  24 <i><font color='green'>See the License for the specific language governing permissions and</font></i>
<a name='L25'>  25 <i><font color='green'>limitations under the License.</font></i>
<a name='L26'>  26 <i><font color='green'></font></i>
<a name='L27'>  27 <i><font color='green'>************************************************************************************/</font></i>
<a name='L28'>  28 
<a name='L29'>  29 <font color='darkred'>#ifndef</font> <a href='../S/134.html#L30' title='Defined at 30 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>OVR_SensorTimeFilter_h</a>
<a name='L30'>  30 <font color='darkred'>#define</font> <a href='../S/134.html#L29' title='Refered from 29 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>OVR_SensorTimeFilter_h</a>
<a name='L31'>  31 
<a name='L32'>  32 <font color='darkred'>#include</font> "<a href='168.html'>Kernel/OVR_Types.h</a>"
<a name='L33'>  33 
<a name='L34'>  34 <a href='../Y/3724.html' title='Multiple used in 73 places.'>namespace</a> <a href='../D/655.html' title='Multiple defined in 50 places.'>OVR</a> <font color='red'>{</font>  
<a name='L35'>  35     
<a name='L36'>  36 
<a name='L37'>  37 <i><font color='green'>//-----------------------------------------------------------------------------------</font></i>
<a name='L38'>  38 <i><font color='green'>// ***** SensorTimeFilter</font></i>
<a name='L39'>  39     
<a name='L40'>  40 <i><font color='green'>// SensorTimeFilter converts sample device time, in seconds, to absolute system</font></i>
<a name='L41'>  41 <i><font color='green'>// time. It filter maintains internal state to estimate the following:</font></i>
<a name='L42'>  42 <i><font color='green'>//</font></i>
<a name='L43'>  43 <i><font color='green'>//  - Difference between system and device time values (ClockDelta).</font></i>
<a name='L44'>  44 <i><font color='green'>//      ~= (systemTime - deviceTime)</font></i>
<a name='L45'>  45 <i><font color='green'>//  - Drift rate between system and device clocks (ClockDeltaDriftPerSecond).</font></i>
<a name='L46'>  46 <i><font color='green'>//</font></i>
<a name='L47'>  47 <i><font color='green'>//  Additionally, the following criteria are enforced:</font></i>
<a name='L48'>  48 <i><font color='green'>//   - Resulting samples must be increasing, compared to prevSample.</font></i>
<a name='L49'>  49 <i><font color='green'>//   - Returned sample time should not exceed 'now' system time by more then a fixed</font></i>
<a name='L50'>  50 <i><font color='green'>//     value.</font></i>
<a name='L51'>  51 <i><font color='green'>//       * Ideally this should be 0, however, enforcing this is hard when clocks</font></i>
<a name='L52'>  52 <i><font color='green'>//         have high discrete values.</font></i>
<a name='L53'>  53 <i><font color='green'>//   - Returned sample AbsoluteTime values deltas are very close to HW samples,</font></i>
<a name='L54'>  54 <i><font color='green'>//     adjusted by drift rate. Note that this is not always possible due to clamping,</font></i>
<a name='L55'>  55 <i><font color='green'>//     in which case it is better to use ScaleTimeUnit(deviceTimeDelta) </font></i>
<a name='L56'>  56 <i><font color='green'>//     for integration.</font></i>
<a name='L57'>  57 <i><font color='green'>//</font></i>
<a name='L58'>  58 <i><font color='green'>// Algorithm: We collect minimum ClockDelta  on windows of </font></i>
<a name='L59'>  59 <i><font color='green'>// consecutive samples (500 ms each set). Long term difference between sample</font></i>
<a name='L60'>  60 <i><font color='green'>// set minimums is drift. ClockDelta is also continually nudged towards most recent</font></i>
<a name='L61'>  61 <i><font color='green'>// minimum. </font></i>
<a name='L62'>  62 
<a name='L63'>  63 <a href='../Y/2849.html' title='Multiple used in 534 places.'>class</a> <a href='../Y/2004.html' title='Multiple used in 9 places.'>SensorTimeFilter</a>
<a name='L64'>  64 <font color='red'>{</font>
<a name='L65'>  65 <a href='../Y/4195.html' title='Multiple used in 367 places.'>public</a>:
<a name='L66'>  66 
<a name='L67'>  67     <i><font color='green'>// It may be desirable to configure these per device/platform.</font></i>
<a name='L68'>  68     <i><font color='green'>// For example, rates can be tighter for DK2 because of microsecond clock.    </font></i>
<a name='L69'>  69     <b>struct</b> <a href='../R/1034.html' title='Multiple refered from 226 places.'>Settings</a>
<a name='L70'>  70     <font color='red'>{</font>
<a name='L71'>  71         <a href='../S/134.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>Settings</a>(<b>int</b> <a href='../Y/3686.html' title='Multiple used in 2 places.'>minSamples</a> = 50,
<a name='L72'>  72                  <b>double</b> <a href='../Y/2852.html' title='Multiple used in 2 places.'>clockDeltaAdjust</a> = -0.0002, <i><font color='green'>// 200 mks in the past.</font></i>
<a name='L73'>  73                  <b>double</b> <a href='../Y/3276.html' title='Multiple used in 2 places.'>futureClamp</a>      = 0.0008)
<a name='L74'>  74             : <a href='../Y/1427.html' title='Multiple used in 5 places.'>MinSamples</a>(<a href='../Y/3686.html' title='Multiple used in 2 places.'>minSamples</a>),
<a name='L75'>  75               <a href='../Y/206.html' title='Multiple used in 3 places.'>ClockDeltaAdjust</a>(<a href='../Y/2852.html' title='Multiple used in 2 places.'>clockDeltaAdjust</a>), 
<a name='L76'>  76           <i><font color='green'>//    PastClamp(-0.032),</font></i>
<a name='L77'>  77               <a href='../Y/654.html' title='Multiple used in 4 places.'>FutureClamp</a>(<a href='../Y/3276.html' title='Multiple used in 2 places.'>futureClamp</a>),
<a name='L78'>  78               <a href='../Y/1651.html' title='Multiple used in 3 places.'>PastSampleResetSeconds</a>(0.2),
<a name='L79'>  79               <a href='../Y/1372.html' title='Multiple used in 3 places.'>MaxChangeRate</a>(0.004),
<a name='L80'>  80               <a href='../Y/1373.html' title='Multiple used in 3 places.'>MaxCorrectRate</a>(0.004)
<a name='L81'>  81         <font color='red'>{</font> <font color='red'>}</font>
<a name='L82'>  82 
<a name='L83'>  83         <i><font color='green'>// Minimum number of samples in a window. Different number may be desirable</font></i>
<a name='L84'>  84         <i><font color='green'>// based on how often samples come in.</font></i>
<a name='L85'>  85         <b>int</b>    <a href='../Y/1427.html' title='Multiple used in 5 places.'>MinSamples</a>;
<a name='L86'>  86 
<a name='L87'>  87         <i><font color='green'>// Factor always added to ClockDelta, used to skew all values into the past by fixed</font></i>
<a name='L88'>  88         <i><font color='green'>// value and reduce the chances we report a sample "in the future".        </font></i>
<a name='L89'>  89         <b>double</b> <a href='../Y/206.html' title='Multiple used in 3 places.'>ClockDeltaAdjust</a>;  
<a name='L90'>  90         <i><font color='green'>// How much away in a past can a sample be before being shifted closer to system time.</font></i>
<a name='L91'>  91         <i><font color='green'>//double PastClamp;</font></i>
<a name='L92'>  92         <i><font color='green'>// How much larger then systemTime can a value be? Set to 0 to clamp to null,</font></i>
<a name='L93'>  93         <i><font color='green'>// put small positive value is better.</font></i>
<a name='L94'>  94         <b>double</b> <a href='../Y/654.html' title='Multiple used in 4 places.'>FutureClamp</a>;
<a name='L95'>  95 
<a name='L96'>  96         <i><font color='green'>// How long (in system time) do we take to reset the system if a device sample.</font></i>
<a name='L97'>  97         <i><font color='green'>// comes in the past. Generally, this should never happened, but exists as a way to</font></i>
<a name='L98'>  98         <i><font color='green'>// address bad timing coming form firmware (temp CCove issue, presumably fixed)</font></i>
<a name='L99'>  99         <i><font color='green'>// or buggy input.</font></i>
<a name='L100'> 100         <b>double</b> <a href='../Y/1651.html' title='Multiple used in 3 places.'>PastSampleResetSeconds</a>;
<a name='L101'> 101 
<a name='L102'> 102         <i><font color='green'>// Maximum drift change and near-term correction rates, in seconds.</font></i>
<a name='L103'> 103         <b>double</b> <a href='../Y/1372.html' title='Multiple used in 3 places.'>MaxChangeRate</a>;
<a name='L104'> 104         <b>double</b> <a href='../Y/1373.html' title='Multiple used in 3 places.'>MaxCorrectRate</a>;
<a name='L105'> 105     <font color='red'>}</font>;
<a name='L106'> 106 
<a name='L107'> 107 
<a name='L108'> 108     <a href='../Y/2004.html' title='Multiple used in 9 places.'>SensorTimeFilter</a>(<b>const</b> <a href='../S/134.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>Settings</a>&amp; <a href='../Y/4390.html' title='Multiple used in 30 places.'>settings</a> = <a href='../S/134.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>Settings</a>());
<a name='L109'> 109 
<a name='L110'> 110 
<a name='L111'> 111     <i><font color='green'>// Convert device sample time to system time, driving clock drift estimation.    </font></i>
<a name='L112'> 112     <i><font color='green'>// Input:  SampleTime, System Time</font></i>
<a name='L113'> 113     <i><font color='green'>// Return: Absolute system time for sample</font></i>
<a name='L114'> 114     <b>double</b> <a href='../S/136.html#L94' title='Defined at 94 in ovr/sdk/src/OVR_SensorTimeFilter.cpp.'>SampleToSystemTime</a>(<b>double</b> <a href='../Y/4333.html' title='Multiple used in 24 places.'>sampleDeviceTime</a>, <b>double</b> <a href='../Y/4530.html' title='Multiple used in 12 places.'>systemTime</a>,
<a name='L115'> 115                               <b>double</b> <a href='../Y/4109.html' title='Multiple used in 8 places.'>prevResult</a>, <b>const</b> <b>char</b>* <a href='../Y/2961.html' title='Multiple used in 6 places.'>debugTag</a> = "");
<a name='L116'> 116 
<a name='L117'> 117 
<a name='L118'> 118     <i><font color='green'>// Scales device time to account for drift.</font></i>
<a name='L119'> 119     <b>double</b> <a href='../Y/1964.html' title='Multiple used in 4 places.'>ScaleTimeUnit</a>(<b>double</b> <a href='../Y/3003.html' title='Multiple used in 2 places.'>deviceClockDelta</a>)
<a name='L120'> 120     <font color='red'>{</font>
<a name='L121'> 121         <b>return</b> <a href='../Y/3003.html' title='Multiple used in 2 places.'>deviceClockDelta</a> * (1.0 + <a href='../Y/209.html' title='Multiple used in 9 places.'>ClockDeltaDriftPerSecond</a>);
<a name='L122'> 122     <font color='red'>}</font>
<a name='L123'> 123 
<a name='L124'> 124     <i><font color='green'>// Return currently estimated difference between the clocks.</font></i>
<a name='L125'> 125     <b>double</b> GetClockDelta() <b>const</b> <font color='red'>{</font> <b>return</b> <a href='../Y/205.html' title='Multiple used in 17 places.'>ClockDelta</a>; <font color='red'>}</font>
<a name='L126'> 126     
<a name='L127'> 127 
<a name='L128'> 128 <a href='../Y/4115.html' title='Multiple used in 56 places.'>private</a>:
<a name='L129'> 129 
<a name='L130'> 130     <b>void</b>   <a href='../S/136.html#L230' title='Defined at 230 in ovr/sdk/src/OVR_SensorTimeFilter.cpp.'>initClockSampling</a>(<b>double</b> <a href='../Y/4333.html' title='Multiple used in 24 places.'>sampleDeviceTime</a>, <b>double</b> <a href='../Y/2851.html' title='Multiple used in 13 places.'>clockDelta</a>);
<a name='L131'> 131     <b>void</b>   <a href='../S/136.html#L247' title='Defined at 247 in ovr/sdk/src/OVR_SensorTimeFilter.cpp.'>processFinishedMinWindow</a>(<b>double</b> <a href='../Y/4333.html' title='Multiple used in 24 places.'>sampleDeviceTime</a>, <b>double</b> <a href='../Y/4530.html' title='Multiple used in 12 places.'>systemTime</a>);
<a name='L132'> 132 
<a name='L133'> 133     <b>static</b> <b>double</b> <a href='../Y/2847.html' title='Multiple used in 3 places.'>clampRate</a>(<b>double</b> <a href='../Y/4232.html' title='Multiple used in 6 places.'>rate</a>, <b>double</b> <a href='../Y/3570.html' title='Multiple used in 24 places.'>limit</a>)
<a name='L134'> 134     <font color='red'>{</font>
<a name='L135'> 135         <b>if</b> (<a href='../Y/4232.html' title='Multiple used in 6 places.'>rate</a> &gt; <a href='../Y/3570.html' title='Multiple used in 24 places.'>limit</a>)
<a name='L136'> 136             <a href='../Y/4232.html' title='Multiple used in 6 places.'>rate</a> = <a href='../Y/3570.html' title='Multiple used in 24 places.'>limit</a>;
<a name='L137'> 137         <b>else</b> <b>if</b> (<a href='../Y/4232.html' title='Multiple used in 6 places.'>rate</a> &lt; -<a href='../Y/3570.html' title='Multiple used in 24 places.'>limit</a>)
<a name='L138'> 138             <a href='../Y/4232.html' title='Multiple used in 6 places.'>rate</a> = -<a href='../Y/3570.html' title='Multiple used in 24 places.'>limit</a>;
<a name='L139'> 139         <b>return</b> <a href='../Y/4232.html' title='Multiple used in 6 places.'>rate</a>;
<a name='L140'> 140     <font color='red'>}</font>
<a name='L141'> 141 
<a name='L142'> 142 
<a name='L143'> 143     <i><font color='green'>// Describes minimum observed ClockDelta for sample set seen in the past.</font></i>
<a name='L144'> 144     <b>struct</b> <a href='../R/584.html' title='Multiple refered from 6 places.'>MinRecord</a>
<a name='L145'> 145     <font color='red'>{</font>
<a name='L146'> 146         <b>double</b>  <a href='../Y/1423.html' title='Multiple used in 2 places.'>MinClockDelta</a>;
<a name='L147'> 147         <b>double</b>  <a href='../Y/1225.html' title='Multiple used in 4 places.'>LastSampleDeviceTime</a>;
<a name='L148'> 148     <font color='red'>}</font>;
<a name='L149'> 149 
<a name='L150'> 150     <i><font color='green'>// Circular buffer storing MinRecord(s) several minutes into the past.</font></i>
<a name='L151'> 151     <i><font color='green'>// Oldest value here is used to help estimate drift.</font></i>
<a name='L152'> 152     <a href='../Y/2849.html' title='Multiple used in 534 places.'>class</a> <a href='../Y/1425.html' title='Multiple used in 3 places.'>MinRecordBuffer</a>
<a name='L153'> 153     <font color='red'>{</font>
<a name='L154'> 154         <b>enum</b> <font color='red'>{</font> <a href='../R/74.html' title='Multiple refered from 15 places.'>BufferSize</a> = 60*6 <font color='red'>}</font>; <i><font color='green'>// 3 min</font></i>
<a name='L155'> 155     <a href='../Y/4195.html' title='Multiple used in 367 places.'>public</a>:
<a name='L156'> 156 
<a name='L157'> 157         <a href='../Y/1425.html' title='Multiple used in 3 places.'>MinRecordBuffer</a>() : <a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a>(0), <a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a>(0) <font color='red'>{</font> <font color='red'>}</font>
<a name='L158'> 158 
<a name='L159'> 159         <b>void</b>      <a href='../D/965.html' title='Multiple defined in 4 places.'>Reset</a>()         <font color='red'>{</font> <a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a> = <a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a> = 0; <font color='red'>}</font>
<a name='L160'> 160         <a href='../Y/2772.html' title='Multiple used in 684 places.'>bool</a>      <a href='../S/137.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_ThreadCommandQueue.cpp.'>IsEmpty</a>() <b>const</b> <font color='red'>{</font> <b>return</b> <a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a> == <a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a>; <font color='red'>}</font>
<a name='L161'> 161 
<a name='L162'> 162         <b>const</b> <a href='../S/134.html#L144' title='Defined at 144 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>MinRecord</a>&amp; <a href='../Y/797.html' title='Multiple used in 3 places.'>GetOldest</a>() <b>const</b>
<a name='L163'> 163         <font color='red'>{</font>
<a name='L164'> 164             <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(!<a href='../S/137.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_ThreadCommandQueue.cpp.'>IsEmpty</a>());
<a name='L165'> 165             <b>return</b> <a href='../Y/1821.html' title='Multiple used in 10 places.'>Records</a>[<a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a>];
<a name='L166'> 166         <font color='red'>}</font>
<a name='L167'> 167         <b>const</b> <a href='../S/134.html#L144' title='Defined at 144 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>MinRecord</a>&amp; <a href='../Y/790.html' title='Multiple used in 2 places.'>GetNewest</a>() <b>const</b>
<a name='L168'> 168         <font color='red'>{</font>
<a name='L169'> 169             <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(!<a href='../S/137.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_ThreadCommandQueue.cpp.'>IsEmpty</a>());
<a name='L170'> 170             <b>return</b> <a href='../Y/1821.html' title='Multiple used in 10 places.'>Records</a>[(<a href='../S/134.html#L154' title='Defined at 154 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>BufferSize</a> + <a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a> - 1) % <a href='../S/134.html#L154' title='Defined at 154 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>BufferSize</a>];
<a name='L171'> 171         <font color='red'>}</font>
<a name='L172'> 172 
<a name='L173'> 173         <b>void</b>     <a href='../Y/42.html' title='Multiple used in 2 places.'>AddRecord</a>(<b>const</b> <a href='../S/134.html#L144' title='Defined at 144 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>MinRecord</a>&amp; <a href='../Y/4245.html' title='Multiple used in 5 places.'>rec</a>)
<a name='L174'> 174         <font color='red'>{</font>
<a name='L175'> 175             <a href='../Y/1821.html' title='Multiple used in 10 places.'>Records</a>[<a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a>] = <a href='../Y/4245.html' title='Multiple used in 5 places.'>rec</a>;
<a name='L176'> 176             <a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a> = <a href='../Y/2689.html' title='Multiple used in 3 places.'>advanceIndex</a>(<a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a>);
<a name='L177'> 177             <b>if</b> (<a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a> == <a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a>)
<a name='L178'> 178                 <a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a> = <a href='../Y/2689.html' title='Multiple used in 3 places.'>advanceIndex</a>(<a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a>);
<a name='L179'> 179         <font color='red'>}</font>
<a name='L180'> 180 
<a name='L181'> 181     <a href='../Y/4115.html' title='Multiple used in 56 places.'>private</a>:
<a name='L182'> 182 
<a name='L183'> 183         <b>static</b> <b>int</b> <a href='../Y/2689.html' title='Multiple used in 3 places.'>advanceIndex</a>(<b>int</b> <a href='../Y/3456.html' title='Multiple used in 204 places.'>index</a>)
<a name='L184'> 184         <font color='red'>{</font>
<a name='L185'> 185             <a href='../Y/3456.html' title='Multiple used in 204 places.'>index</a>++;
<a name='L186'> 186             <b>if</b> (<a href='../Y/3456.html' title='Multiple used in 204 places.'>index</a> &gt;= <a href='../S/134.html#L154' title='Defined at 154 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>BufferSize</a>)
<a name='L187'> 187                 <a href='../Y/3456.html' title='Multiple used in 204 places.'>index</a> = 0;
<a name='L188'> 188             <b>return</b> <a href='../Y/3456.html' title='Multiple used in 204 places.'>index</a>;
<a name='L189'> 189         <font color='red'>}</font>
<a name='L190'> 190 
<a name='L191'> 191         <a href='../S/134.html#L144' title='Defined at 144 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>MinRecord</a> <a href='../Y/1821.html' title='Multiple used in 10 places.'>Records</a>[<a href='../S/134.html#L154' title='Defined at 154 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>BufferSize</a>];
<a name='L192'> 192         <b>int</b>       <a href='../Y/916.html' title='Multiple used in 25 places.'>Head</a>;  <i><font color='green'>// Location we will most recent entry, unused.</font></i>
<a name='L193'> 193         <b>int</b>       <a href='../Y/2186.html' title='Multiple used in 21 places.'>Tail</a>;  <i><font color='green'>// Oldest entry.</font></i>
<a name='L194'> 194     <font color='red'>}</font>;
<a name='L195'> 195 
<a name='L196'> 196 
<a name='L197'> 197     <a href='../S/134.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_SensorTimeFilter.h.'>Settings</a>    <a href='../Y/598.html' title='Multiple used in 10 places.'>FilterSettings</a>;
<a name='L198'> 198 
<a name='L199'> 199     <i><font color='green'>// Clock correction state.</font></i>
<a name='L200'> 200     <a href='../Y/2772.html' title='Multiple used in 684 places.'>bool</a>        <a href='../Y/210.html' title='Multiple used in 4 places.'>ClockInitialized</a>;
<a name='L201'> 201     <b>double</b>      <a href='../Y/205.html' title='Multiple used in 17 places.'>ClockDelta</a>;    
<a name='L202'> 202     <b>double</b>      <a href='../Y/209.html' title='Multiple used in 9 places.'>ClockDeltaDriftPerSecond</a>;
<a name='L203'> 203     <b>double</b>      <a href='../Y/207.html' title='Multiple used in 10 places.'>ClockDeltaCorrectPerSecond</a>;
<a name='L204'> 204     <b>double</b>      <a href='../Y/208.html' title='Multiple used in 11 places.'>ClockDeltaCorrectSecondsLeft</a>;
<a name='L205'> 205     <b>double</b>      <a href='../Y/1536.html' title='Multiple used in 8 places.'>OldClockDeltaDriftExpire</a>;
<a name='L206'> 206     
<a name='L207'> 207     <b>double</b>      <a href='../Y/1215.html' title='Multiple used in 6 places.'>LastLargestDeviceTime</a>;
<a name='L208'> 208     <b>double</b>      <a href='../Y/1701.html' title='Multiple used in 4 places.'>PrevSystemTime</a>;    
<a name='L209'> 209     <i><font color='green'>// Used to reset timing if we get multiple "samples in the past"</font></i>
<a name='L210'> 210     <b>double</b>      <a href='../Y/1652.html' title='Multiple used in 6 places.'>PastSampleResetTime</a>;
<a name='L211'> 211 
<a name='L212'> 212     <i><font color='green'>// "MinWindow" is a block of time during which minimum ClockDelta values</font></i>
<a name='L213'> 213     <i><font color='green'>// are collected into MinWindowClockDelta.</font></i>
<a name='L214'> 214     <b>int</b>         <a href='../Y/1432.html' title='Multiple used in 6 places.'>MinWindowsCollected</a>;
<a name='L215'> 215     <b>double</b>      <a href='../Y/1429.html' title='Multiple used in 7 places.'>MinWindowDuration</a>; <i><font color='green'>// Device sample seconds</font></i>
<a name='L216'> 216     <b>double</b>      <a href='../Y/1430.html' title='Multiple used in 5 places.'>MinWindowLastTime</a>;
<a name='L217'> 217     <b>double</b>      <a href='../Y/1428.html' title='Multiple used in 12 places.'>MinWindowClockDelta</a>;
<a name='L218'> 218     <b>int</b>         <a href='../Y/1431.html' title='Multiple used in 10 places.'>MinWindowSamples</a>;
<a name='L219'> 219 
<a name='L220'> 220     <i><font color='green'>// Historic buffer used to determine rate of clock change over time.</font></i>
<a name='L221'> 221     <a href='../Y/1425.html' title='Multiple used in 3 places.'>MinRecordBuffer</a> <a href='../Y/1426.html' title='Multiple used in 8 places.'>MinRecords</a>;
<a name='L222'> 222 <font color='red'>}</font>;
<a name='L223'> 223 
<a name='L224'> 224 <font color='red'>}</font> <i><font color='green'>// namespace OVR</font></i>
<a name='L225'> 225 
<a name='L226'> 226 <font color='darkred'>#endif</font> <i><font color='green'>// OVR_SensorTimeFilter_h</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^][v]<a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
