<html>
<head>
<title>ovr/sdk/src/OVR_SensorCalibration.cpp</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/215.html'>ovr</a>/<a href='../files/216.html'>sdk</a>/<a href='../files/218.html'>src</a>/OVR_SensorCalibration.cpp</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L40'>[^]</a><a href='#L290'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L40' title='Defined at 40.'>GyroAutoTemperature</a>
<li><a href='#L45' title='Defined at 45.'>Initialize</a>
<li><a href='#L77' title='Defined at 77.'>DebugPrintLocalTemperatureTable</a>
<li><a href='#L101' title='Defined at 101.'>DebugClearHeadsetTemperatureReports</a>
<li><a href='#L137' title='Defined at 137.'>Apply</a>
<li><a href='#L153' title='Defined at 153.'>AutocalibrateGyro</a>
<li><a href='#L181' title='Defined at 181.'>StoreAutoOffset</a>
<li><a href='#L250' title='Defined at 250.'>median</a>
<li><a href='#L270' title='Defined at 270.'>Initialize</a>
<li><a href='#L290' title='Defined at 290.'>GetOffset</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 <i><font color='green'>/************************************************************************************</font></i>
<a name='L2'>   2 <i><font color='green'></font></i>
<a name='L3'>   3 <i><font color='green'>Filename    :   OVR_SensorCalibration.cpp</font></i>
<a name='L4'>   4 <i><font color='green'>Content     :   Calibration data implementation for the IMU messages </font></i>
<a name='L5'>   5 <i><font color='green'>Created     :   January 28, 2014</font></i>
<a name='L6'>   6 <i><font color='green'>Authors     :   Max Katsev</font></i>
<a name='L7'>   7 <i><font color='green'></font></i>
<a name='L8'>   8 <i><font color='green'>Copyright   :   Copyright 2014 Oculus VR, Inc. All Rights reserved.</font></i>
<a name='L9'>   9 <i><font color='green'></font></i>
<a name='L10'>  10 <i><font color='green'>Licensed under the Oculus VR Rift SDK License Version 3.1 (the "License"); </font></i>
<a name='L11'>  11 <i><font color='green'>you may not use the Oculus VR Rift SDK except in compliance with the License, </font></i>
<a name='L12'>  12 <i><font color='green'>which is provided at the time of installation or download, or which </font></i>
<a name='L13'>  13 <i><font color='green'>otherwise accompanies this software in either electronic or hard copy form.</font></i>
<a name='L14'>  14 <i><font color='green'></font></i>
<a name='L15'>  15 <i><font color='green'>You may obtain a copy of the License at</font></i>
<a name='L16'>  16 <i><font color='green'></font></i>
<a name='L17'>  17 <i><font color='green'>http://www.oculusvr.com/licenses/LICENSE-3.1 </font></i>
<a name='L18'>  18 <i><font color='green'></font></i>
<a name='L19'>  19 <i><font color='green'>Unless required by applicable law or agreed to in writing, the Oculus VR SDK </font></i>
<a name='L20'>  20 <i><font color='green'>distributed under the License is distributed on an "AS IS" BASIS,</font></i>
<a name='L21'>  21 <i><font color='green'>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</font></i>
<a name='L22'>  22 <i><font color='green'>See the License for the specific language governing permissions and</font></i>
<a name='L23'>  23 <i><font color='green'>limitations under the License.</font></i>
<a name='L24'>  24 <i><font color='green'></font></i>
<a name='L25'>  25 <i><font color='green'>*************************************************************************************/</font></i>
<a name='L26'>  26 
<a name='L27'>  27 <font color='darkred'>#include</font> "<a href='141.html'>OVR_SensorCalibration.h</a>"
<a name='L28'>  28 <font color='darkred'>#include</font> "<a href='155.html'>Kernel/OVR_Log.h</a>"
<a name='L29'>  29 <font color='darkred'>#include</font> "<a href='151.html'>Kernel/OVR_Threads.h</a>"
<a name='L30'>  30 <font color='darkred'>#include</font> &lt;time.h&gt;
<a name='L31'>  31 
<a name='L32'>  32 <b>namespace</b> <a href='../R/624.html' title='Multiple refered from 184 places.'>OVR</a> <font color='red'>{</font>
<a name='L33'>  33 
<a name='L34'>  34 <b>using</b> <b>namespace</b> <a href='../S/176.html#L29' title='Defined at 29 in ovr/sdk/src/Kernel/OVR_Alg.cpp.'>Alg</a>;
<a name='L35'>  35 
<a name='L36'>  36 <b>const</b> <a href='../D/1212.html' title='Multiple defined in 3 places.'>UByte</a> <a href='../Y/2384.html' title='Multiple used in 4 places.'>VERSION</a> = 2;
<a name='L37'>  37 <b>const</b> <a href='../D/1212.html' title='Multiple defined in 3 places.'>UByte</a> <a href='../Y/1330.html' title='Multiple used in 2 places.'>MAX_COMPAT_VERSION</a> = 15;
<a name='L38'>  38 
<a name='L39'>  39 <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::SensorCalibration(<a href='../Y/1989.html' title='Multiple used in 36 places.'>SensorDevice</a>* <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>)
<a name='L40'>  40     : <a href='../Y/1334.html' title='Multiple used in 9 places.'>MagCalibrated</a>(<b>false</b>), GyroFilter(6000), <a href='../R/412.html' title='Multiple refered from 11 places.'>GyroAutoTemperature</a>(0)
<a name='L41'>  41 <font color='red'>{</font>
<a name='L42'>  42     <b>this</b>-&gt;<a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>;
<a name='L43'>  43 <font color='red'>}</font>;
<a name='L44'>  44 
<a name='L45'>  45 <b>void</b> <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::<a href='../R/458.html' title='Multiple refered from 25 places.'>Initialize</a>()
<a name='L46'>  46 <font color='red'>{</font>
<a name='L47'>  47     <i><font color='green'>// read factory calibration</font></i>
<a name='L48'>  48     <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/190.html#L568' title='Defined at 568 in ovr/sdk/src/OVR_SensorImpl.cpp.'>GetFactoryCalibration</a>(&amp;<a href='../Y/19.html' title='Multiple used in 22 places.'>AccelOffset</a>, &amp;<a href='../Y/836.html' title='Multiple used in 7 places.'>GyroAutoOffset</a>, &amp;<a href='../Y/18.html' title='Multiple used in 14 places.'>AccelMatrix</a>, &amp;<a href='../Y/840.html' title='Multiple used in 14 places.'>GyroMatrix</a>, &amp;<a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a>);
<a name='L49'>  49 
<a name='L50'>  50     <i><font color='green'>// if the headset has an autocalibrated offset, prefer it over the factory defaults</font></i>
<a name='L51'>  51     <a href='../S/108.html#L924' title='Defined at 924 in ovr/sdk/src/OVR_Device.h.'>GyroOffsetReport</a> <a href='../Y/3378.html' title='Multiple used in 5 places.'>gyroReport</a>;
<a name='L52'>  52     <b>bool</b> <a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/188.html#L773' title='Defined at 773 in ovr/sdk/src/OVR_Sensor2Impl.cpp.'>GetGyroOffsetReport</a>(&amp;<a href='../Y/3378.html' title='Multiple used in 5 places.'>gyroReport</a>);
<a name='L53'>  53     <b>if</b> (<a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a> &amp;&amp; <a href='../Y/3378.html' title='Multiple used in 5 places.'>gyroReport</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> != <a href='../S/108.html#L924' title='Defined at 924 in ovr/sdk/src/OVR_Device.h.'>GyroOffsetReport</a>::<a href='../Y/2404.html' title='Multiple used in 3 places.'>Version_NoOffset</a>)
<a name='L54'>  54     <font color='red'>{</font>
<a name='L55'>  55         <a href='../Y/836.html' title='Multiple used in 7 places.'>GyroAutoOffset</a> = (<a href='../S/177.html#L554' title='Defined at 554 in ovr/sdk/src/Kernel/OVR_Math.h.'>Vector3f</a>) <a href='../Y/3378.html' title='Multiple used in 5 places.'>gyroReport</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>;
<a name='L56'>  56         <a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a> = (<b>float</b>) <a href='../Y/3378.html' title='Multiple used in 5 places.'>gyroReport</a>.<a href='../S/144.html#L163' title='Defined at 163 in ovr/sdk/src/OVR_SensorImpl_Common.cpp.'>Temperature</a>;
<a name='L57'>  57     <font color='red'>}</font>
<a name='L58'>  58     
<a name='L59'>  59     <i><font color='green'>// read the temperature tables and prepare the interpolation structures</font></i>
<a name='L60'>  60     <a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/188.html#L729' title='Defined at 729 in ovr/sdk/src/OVR_Sensor2Impl.cpp.'>GetAllTemperatureReports</a>(&amp;<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>);
<a name='L61'>  61     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a>);
<a name='L62'>  62     <b>for</b> (<b>int</b> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; 3; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L63'>  63         <a href='../Y/1011.html' title='Multiple used in 4 places.'>Interpolators</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../D/475.html' title='Multiple defined in 10 places.'>Initialize</a>(<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>, <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>);
<a name='L64'>  64 
<a name='L65'>  65     <i><font color='green'>// read the mag calibration</font></i>
<a name='L66'>  66     <a href='../S/108.html#L675' title='Defined at 675 in ovr/sdk/src/OVR_Device.h.'>MagCalibrationReport</a> <a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>;
<a name='L67'>  67     <a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../D/369.html' title='Multiple defined in 2 places.'>GetMagCalibrationReport</a>(&amp;<a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>);
<a name='L68'>  68     <a href='../Y/1334.html' title='Multiple used in 9 places.'>MagCalibrated</a> = <a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a> &amp;&amp; <a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> &gt; 0;
<a name='L69'>  69     <a href='../Y/1337.html' title='Multiple used in 3 places.'>MagMatrix</a> = <a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>.<a href='../Y/179.html' title='Multiple used in 12 places.'>Calibration</a>;
<a name='L70'>  70     <b>if</b> (!<a href='../Y/1334.html' title='Multiple used in 9 places.'>MagCalibrated</a>)
<a name='L71'>  71     <font color='red'>{</font>
<a name='L72'>  72         <i><font color='green'>// OVR_ASSERT(false);</font></i>
<a name='L73'>  73         <a href='../Y/1305.html' title='Multiple used in 3 places.'>LogError</a>("Magnetometer calibration not found!\n");
<a name='L74'>  74     <font color='red'>}</font>
<a name='L75'>  75 <font color='red'>}</font>
<a name='L76'>  76 
<a name='L77'>  77 <b>void</b> <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::<a href='../S/141.html#L61' title='Refered from 61 in ovr/sdk/src/OVR_SensorCalibration.h.'>DebugPrintLocalTemperatureTable</a>()
<a name='L78'>  78 <font color='red'>{</font>
<a name='L79'>  79         <a href='../Y/1311.html' title='Multiple used in 39 places.'>LogText</a>("TemperatureReports:\n");
<a name='L80'>  80         <b>for</b> (<b>int</b> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; (<b>int</b>)<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>(); <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L81'>  81         <font color='red'>{</font>
<a name='L82'>  82                 <b>for</b> (<b>int</b> <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a> = 0; <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a> &lt; (<b>int</b>)<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>(); <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a>++)
<a name='L83'>  83                 <font color='red'>{</font>
<a name='L84'>  84                         <a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&amp; <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a> = <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>][<a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a>];
<a name='L85'>  85 
<a name='L86'>  86                         <a href='../Y/1311.html' title='Multiple used in 39 places.'>LogText</a>("[%d][%d]: Version=%3d, Bin=%d/%d, "
<a name='L87'>  87                                         "Sample=%d/%d, TargetTemp=%3.1lf, "
<a name='L88'>  88                                         "ActualTemp=%4.1lf, "
<a name='L89'>  89                                         "Offset=(%7.2lf, %7.2lf, %7.2lf), "
<a name='L90'>  90                                         "Time=%d\n",    <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>, <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a>, <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a>,
<a name='L91'>  91                                                                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/128.html' title='Multiple used in 8 places.'>Bin</a>, <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1481.html' title='Multiple used in 9 places.'>NumBins</a>,
<a name='L92'>  92                                                                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1931.html' title='Multiple used in 10 places.'>Sample</a>, <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1486.html' title='Multiple used in 20 places.'>NumSamples</a>,
<a name='L93'>  93                                                                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/2193.html' title='Multiple used in 11 places.'>TargetTemperature</a>,
<a name='L94'>  94                                                                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a>,
<a name='L95'>  95                                                                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>.<a href='../Y/4876.html' title='Multiple used in 308 places.'>x</a>, <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>.<a href='../Y/4884.html' title='Multiple used in 286 places.'>y</a>, <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>.<a href='../Y/4892.html' title='Multiple used in 193 places.'>z</a>,
<a name='L96'>  96                                                                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a>);
<a name='L97'>  97                 <font color='red'>}</font>
<a name='L98'>  98         <font color='red'>}</font>
<a name='L99'>  99 <font color='red'>}</font>
<a name='L100'> 100 
<a name='L101'> 101 <b>void</b> <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::<a href='../S/141.html#L62' title='Refered from 62 in ovr/sdk/src/OVR_SensorCalibration.h.'>DebugClearHeadsetTemperatureReports</a>()
<a name='L102'> 102 <font color='red'>{</font>
<a name='L103'> 103     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a> != <a href='../Y/1448.html' title='Multiple used in 256 places.'>NULL</a>);
<a name='L104'> 104 
<a name='L105'> 105     <b>bool</b> <a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a>;
<a name='L106'> 106 
<a name='L107'> 107         <a href='../Y/62.html' title='Multiple used in 95 places.'>Array</a>&lt;<a href='../Y/62.html' title='Multiple used in 95 places.'>Array</a>&lt;<a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&gt; &gt; <a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>;
<a name='L108'> 108         <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/188.html#L729' title='Defined at 729 in ovr/sdk/src/OVR_Sensor2Impl.cpp.'>GetAllTemperatureReports</a>(&amp;<a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>);
<a name='L109'> 109 
<a name='L110'> 110         <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>() &gt; 0);
<a name='L111'> 111         <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>[0].<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>() &gt; 0);
<a name='L112'> 112 
<a name='L113'> 113         <a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&amp; <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a> = <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[0][0];
<a name='L114'> 114 
<a name='L115'> 115         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a> = 0.0;
<a name='L116'> 116         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a> = 0;
<a name='L117'> 117         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> = 0;
<a name='L118'> 118         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>.<a href='../Y/4876.html' title='Multiple used in 308 places.'>x</a> = <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>.<a href='../Y/4884.html' title='Multiple used in 286 places.'>y</a> = <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>.<a href='../Y/4892.html' title='Multiple used in 193 places.'>z</a> = 0.0;
<a name='L119'> 119 
<a name='L120'> 120         <b>for</b> (<a href='../D/1212.html' title='Multiple defined in 3 places.'>UByte</a> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1481.html' title='Multiple used in 9 places.'>NumBins</a>; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L121'> 121         <font color='red'>{</font>
<a name='L122'> 122                 <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/128.html' title='Multiple used in 8 places.'>Bin</a> = <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>;
<a name='L123'> 123 
<a name='L124'> 124                 <b>for</b> (<a href='../D/1212.html' title='Multiple defined in 3 places.'>UByte</a> <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a> = 0; <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a> &lt; <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1486.html' title='Multiple used in 20 places.'>NumSamples</a>; <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a>++)
<a name='L125'> 125                 <font color='red'>{</font>
<a name='L126'> 126                         <a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>.<a href='../Y/1931.html' title='Multiple used in 10 places.'>Sample</a> = <a href='../Y/3520.html' title='Multiple used in 155 places.'>j</a>;
<a name='L127'> 127 
<a name='L128'> 128                         <a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/188.html#L692' title='Defined at 692 in ovr/sdk/src/OVR_Sensor2Impl.cpp.'>SetTemperatureReport</a>(<a href='../Y/4653.html' title='Multiple used in 18 places.'>tr</a>);
<a name='L129'> 129                         <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4291.html' title='Multiple used in 413 places.'>result</a>);
<a name='L130'> 130                         
<a name='L131'> 131                         <i><font color='green'>// Need to wait for the tracker board to finish writing to eeprom.</font></i>
<a name='L132'> 132                         <a href='../D/1164.html' title='Multiple defined in 4 places.'>Thread</a>::<a href='../S/181.html#L773' title='Defined at 773 in ovr/sdk/src/Kernel/OVR_ThreadsPthread.cpp.'>MSleep</a>(50);
<a name='L133'> 133                 <font color='red'>}</font>
<a name='L134'> 134         <font color='red'>}</font>
<a name='L135'> 135 <font color='red'>}</font>
<a name='L136'> 136 
<a name='L137'> 137 <b>void</b> <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::<a href='../R/42.html' title='Multiple refered from 5 places.'>Apply</a>(<a href='../Y/1395.html' title='Multiple used in 15 places.'>MessageBodyFrame</a>&amp; <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>)
<a name='L138'> 138 <font color='red'>{</font>
<a name='L139'> 139     <a href='../S/128.html#L153' title='Defined at 153 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>AutocalibrateGyro</a>(<a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>);
<a name='L140'> 140 
<a name='L141'> 141     <i><font color='green'>// compute the interpolated offset</font></i>
<a name='L142'> 142     <a href='../S/177.html#L554' title='Defined at 554 in ovr/sdk/src/Kernel/OVR_Math.h.'>Vector3f</a> <a href='../Y/3377.html' title='Multiple used in 3 places.'>gyroOffset</a>;
<a name='L143'> 143     <b>for</b> (<b>int</b> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; 3; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L144'> 144         <a href='../Y/3377.html' title='Multiple used in 3 places.'>gyroOffset</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>] = (<b>float</b>) <a href='../Y/1011.html' title='Multiple used in 4 places.'>Interpolators</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../S/128.html#L290' title='Defined at 290 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GetOffset</a>(<a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../S/144.html#L163' title='Defined at 163 in ovr/sdk/src/OVR_SensorImpl_Common.cpp.'>Temperature</a>, <a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a>, <a href='../Y/836.html' title='Multiple used in 7 places.'>GyroAutoOffset</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>]);
<a name='L145'> 145 
<a name='L146'> 146     <i><font color='green'>// apply calibration</font></i>
<a name='L147'> 147     <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/1889.html' title='Multiple used in 10 places.'>RotationRate</a> = <a href='../Y/840.html' title='Multiple used in 14 places.'>GyroMatrix</a>.<a href='../Y/2301.html' title='Multiple used in 41 places.'>Transform</a>(<a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/1889.html' title='Multiple used in 10 places.'>RotationRate</a> - <a href='../Y/3377.html' title='Multiple used in 3 places.'>gyroOffset</a>);
<a name='L148'> 148     <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/25.html' title='Multiple used in 9 places.'>Acceleration</a> = <a href='../Y/18.html' title='Multiple used in 14 places.'>AccelMatrix</a>.<a href='../Y/2301.html' title='Multiple used in 41 places.'>Transform</a>(<a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/25.html' title='Multiple used in 9 places.'>Acceleration</a> - <a href='../Y/19.html' title='Multiple used in 22 places.'>AccelOffset</a>);
<a name='L149'> 149     <b>if</b> (<a href='../Y/1334.html' title='Multiple used in 9 places.'>MagCalibrated</a>)
<a name='L150'> 150         <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/1346.html' title='Multiple used in 10 places.'>MagneticField</a> = <a href='../Y/1337.html' title='Multiple used in 3 places.'>MagMatrix</a>.<a href='../Y/2301.html' title='Multiple used in 41 places.'>Transform</a>(<a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/1346.html' title='Multiple used in 10 places.'>MagneticField</a>);
<a name='L151'> 151 <font color='red'>}</font>
<a name='L152'> 152 
<a name='L153'> 153 <b>void</b> <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::<a href='../R/53.html' title='Multiple refered from 2 places.'>AutocalibrateGyro</a>(<a href='../Y/1395.html' title='Multiple used in 15 places.'>MessageBodyFrame</a> <b>const</b>&amp; <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>)
<a name='L154'> 154 <font color='red'>{</font>
<a name='L155'> 155     <b>const</b> <b>float</b> <a href='../Y/2694.html' title='Multiple used in 5 places.'>alpha</a> = 0.4f;
<a name='L156'> 156     <i><font color='green'>// 1.25f is a scaling factor related to conversion from per-axis comparison to length comparison</font></i>
<a name='L157'> 157     <b>const</b> <b>float</b> <a href='../Y/2671.html' title='Multiple used in 2 places.'>absLimit</a> = 1.25f * 0.349066f;
<a name='L158'> 158     <b>const</b> <b>float</b> <a href='../Y/3765.html' title='Multiple used in 2 places.'>noiseLimit</a> = 1.25f * 0.03f;
<a name='L159'> 159 
<a name='L160'> 160     <a href='../S/177.html#L554' title='Defined at 554 in ovr/sdk/src/Kernel/OVR_Math.h.'>Vector3f</a> <a href='../Y/3376.html' title='Multiple used in 7 places.'>gyro</a> = <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../Y/1889.html' title='Multiple used in 10 places.'>RotationRate</a>;
<a name='L161'> 161     <i><font color='green'>// do a moving average to reject short term noise</font></i>
<a name='L162'> 162     <a href='../S/177.html#L554' title='Defined at 554 in ovr/sdk/src/Kernel/OVR_Math.h.'>Vector3f</a> <a href='../Y/2738.html' title='Multiple used in 3 places.'>avg</a> = (<a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../S/137.html#L69' title='Defined at 69 in ovr/sdk/src/OVR_ThreadCommandQueue.cpp.'>IsEmpty</a>()) ? <a href='../Y/3376.html' title='Multiple used in 7 places.'>gyro</a> : <a href='../Y/3376.html' title='Multiple used in 7 places.'>gyro</a> * <a href='../Y/2694.html' title='Multiple used in 5 places.'>alpha</a> + <a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/1655.html' title='Multiple used in 45 places.'>PeekBack</a>() * (1 - <a href='../Y/2694.html' title='Multiple used in 5 places.'>alpha</a>);
<a name='L163'> 163 
<a name='L164'> 164     <i><font color='green'>// Make sure the absolute value is below what is likely motion</font></i>
<a name='L165'> 165     <i><font color='green'>// Make sure it is close enough to the current average that it is probably noise and not motion</font></i>
<a name='L166'> 166     <b>if</b> (<a href='../Y/2738.html' title='Multiple used in 3 places.'>avg</a>.<a href='../Y/1267.html' title='Multiple used in 19 places.'>Length</a>() &gt;= <a href='../Y/2671.html' title='Multiple used in 2 places.'>absLimit</a> || (<a href='../Y/2738.html' title='Multiple used in 3 places.'>avg</a> - <a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/1386.html' title='Multiple used in 7 places.'>Mean</a>()).<a href='../Y/1267.html' title='Multiple used in 19 places.'>Length</a>() &gt;= <a href='../Y/3765.html' title='Multiple used in 2 places.'>noiseLimit</a>)
<a name='L167'> 167         <a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../D/113.html' title='Multiple defined in 3 places.'>Clear</a>();
<a name='L168'> 168     <a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/1729.html' title='Multiple used in 56 places.'>PushBack</a>(<a href='../Y/2738.html' title='Multiple used in 3 places.'>avg</a>);
<a name='L169'> 169 
<a name='L170'> 170     <i><font color='green'>// if had a reasonable number of samples already use it for the current offset</font></i>
<a name='L171'> 171     <b>if</b> (<a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>() &gt; <a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/734.html' title='Multiple used in 13 places.'>GetCapacity</a>() / 2)
<a name='L172'> 172     <font color='red'>{</font>
<a name='L173'> 173         <a href='../Y/836.html' title='Multiple used in 7 places.'>GyroAutoOffset</a> = <a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/1386.html' title='Multiple used in 7 places.'>Mean</a>();
<a name='L174'> 174         <a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a> = <a href='../Y/3704.html' title='Multiple used in 71 places.'>msg</a>.<a href='../S/144.html#L163' title='Defined at 163 in ovr/sdk/src/OVR_SensorImpl_Common.cpp.'>Temperature</a>;
<a name='L175'> 175         <i><font color='green'>// After ~6 seconds of no motion, use the average as the new zero rate offset</font></i>
<a name='L176'> 176         <b>if</b> (<a href='../Y/839.html' title='Multiple used in 8 places.'>GyroFilter</a>.<a href='../Y/1033.html' title='Multiple used in 6 places.'>IsFull</a>())
<a name='L177'> 177             <a href='../S/128.html#L181' title='Defined at 181 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>StoreAutoOffset</a>();
<a name='L178'> 178     <font color='red'>}</font>
<a name='L179'> 179 <font color='red'>}</font>
<a name='L180'> 180 
<a name='L181'> 181 <b>void</b> <a href='../Y/1986.html' title='Multiple used in 10 places.'>SensorCalibration</a>::<a href='../R/1058.html' title='Multiple refered from 2 places.'>StoreAutoOffset</a>()
<a name='L182'> 182 <font color='red'>{</font>
<a name='L183'> 183     <b>const</b> <b>double</b> <a href='../Y/3646.html' title='Multiple used in 2 places.'>maxDeltaT</a> = 2.5;
<a name='L184'> 184     <b>const</b> <b>double</b> <a href='../Y/3683.html' title='Multiple used in 2 places.'>minExtraDeltaT</a> = 0.5;
<a name='L185'> 185     <b>const</b> <a href='../D/1214.html' title='Multiple defined in 3 places.'>UInt32</a> <a href='../Y/3682.html' title='Multiple used in 2 places.'>minDelay</a> = 24 * 3600; <i><font color='green'>// 1 day in seconds</font></i>
<a name='L186'> 186 
<a name='L187'> 187     <i><font color='green'>// find the best bin</font></i>
<a name='L188'> 188     <a href='../S/168.html#L218' title='Defined at 218 in ovr/sdk/src/Kernel/OVR_Types.h.'>UPInt</a> <a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a> = 0;
<a name='L189'> 189     <b>for</b> (<a href='../S/168.html#L218' title='Defined at 218 in ovr/sdk/src/Kernel/OVR_Types.h.'>UPInt</a> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 1; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>(); <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++) 
<a name='L190'> 190         <b>if</b> (<a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a> - <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>][0].<a href='../Y/2193.html' title='Multiple used in 11 places.'>TargetTemperature</a>) &lt; 
<a name='L191'> 191             <a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a> - <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][0].<a href='../Y/2193.html' title='Multiple used in 11 places.'>TargetTemperature</a>))
<a name='L192'> 192             <a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a> = <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>;
<a name='L193'> 193 
<a name='L194'> 194     <i><font color='green'>// find the oldest and newest samples</font></i>
<a name='L195'> 195     <i><font color='green'>// NB: uninitialized samples have Time == 0, so they will get picked as the oldest</font></i>
<a name='L196'> 196     <a href='../S/168.html#L218' title='Defined at 218 in ovr/sdk/src/Kernel/OVR_Types.h.'>UPInt</a> <a href='../Y/3755.html' title='Multiple used in 4 places.'>newestIdx</a> = 0, <a href='../Y/3811.html' title='Multiple used in 4 places.'>oldestIdx</a> = 0;
<a name='L197'> 197     <b>for</b> (<a href='../S/168.html#L218' title='Defined at 218 in ovr/sdk/src/Kernel/OVR_Types.h.'>UPInt</a> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 1; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>].<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>(); <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L198'> 198     <font color='red'>{</font>
<a name='L199'> 199         <i><font color='green'>// if the version is newer - do nothing</font></i>
<a name='L200'> 200         <b>if</b> (<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> &gt; <a href='../Y/2384.html' title='Multiple used in 4 places.'>VERSION</a>)
<a name='L201'> 201             <b>return</b>;
<a name='L202'> 202         <b>if</b> (<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a> &gt; <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3755.html' title='Multiple used in 4 places.'>newestIdx</a>].<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a>)
<a name='L203'> 203             <a href='../Y/3755.html' title='Multiple used in 4 places.'>newestIdx</a> = <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>;
<a name='L204'> 204         <b>if</b> (<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a> &lt; <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3811.html' title='Multiple used in 4 places.'>oldestIdx</a>].<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a>)
<a name='L205'> 205             <a href='../Y/3811.html' title='Multiple used in 4 places.'>oldestIdx</a> = <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>;
<a name='L206'> 206     <font color='red'>}</font>
<a name='L207'> 207     <a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&amp; <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a> = <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3811.html' title='Multiple used in 4 places.'>oldestIdx</a>];
<a name='L208'> 208     <a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&amp; <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a> = <a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>[<a href='../Y/2754.html' title='Multiple used in 9 places.'>binIdx</a>][<a href='../Y/3755.html' title='Multiple used in 4 places.'>newestIdx</a>];
<a name='L209'> 209     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>((<a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/1931.html' title='Multiple used in 10 places.'>Sample</a> == 0 &amp;&amp; <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/1931.html' title='Multiple used in 10 places.'>Sample</a> == 0 &amp;&amp; <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> == 0) || 
<a name='L210'> 210                 <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/1931.html' title='Multiple used in 10 places.'>Sample</a> == (<a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/1931.html' title='Multiple used in 10 places.'>Sample</a> + 1) % <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/1486.html' title='Multiple used in 20 places.'>NumSamples</a>);
<a name='L211'> 211 
<a name='L212'> 212     <b>bool</b> <a href='../Y/4871.html' title='Multiple used in 6 places.'>writeSuccess</a> = <b>false</b>;
<a name='L213'> 213     <a href='../D/1214.html' title='Multiple defined in 3 places.'>UInt32</a> <a href='../Y/3770.html' title='Multiple used in 16 places.'>now</a> = (<a href='../D/1214.html' title='Multiple defined in 3 places.'>UInt32</a>) <a href='../Y/4598.html' title='Multiple used in 6 places.'>time</a>(0);
<a name='L214'> 214     <b>if</b> (<a href='../Y/3770.html' title='Multiple used in 16 places.'>now</a> - <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a> &gt; <a href='../Y/3682.html' title='Multiple used in 2 places.'>minDelay</a>)
<a name='L215'> 215     <font color='red'>{</font>
<a name='L216'> 216         <i><font color='green'>// only write a new sample if the temperature is close enough</font></i>
<a name='L217'> 217         <b>if</b> (<a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a> - <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/2193.html' title='Multiple used in 11 places.'>TargetTemperature</a>) &lt; <a href='../Y/3646.html' title='Multiple used in 2 places.'>maxDeltaT</a>)
<a name='L218'> 218         <font color='red'>{</font>
<a name='L219'> 219             <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/2249.html' title='Multiple used in 11 places.'>Time</a> = <a href='../Y/3770.html' title='Multiple used in 16 places.'>now</a>;
<a name='L220'> 220             <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a> = <a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a>;
<a name='L221'> 221             <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a> = (<a href='../S/177.html#L555' title='Defined at 555 in ovr/sdk/src/Kernel/OVR_Math.h.'>Vector3d</a>) <a href='../Y/836.html' title='Multiple used in 7 places.'>GyroAutoOffset</a>;
<a name='L222'> 222             <a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> = <a href='../Y/2384.html' title='Multiple used in 4 places.'>VERSION</a>;
<a name='L223'> 223             <a href='../Y/4871.html' title='Multiple used in 6 places.'>writeSuccess</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/188.html#L692' title='Defined at 692 in ovr/sdk/src/OVR_Sensor2Impl.cpp.'>SetTemperatureReport</a>(<a href='../Y/3812.html' title='Multiple used in 9 places.'>oldestReport</a>);
<a name='L224'> 224             <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4871.html' title='Multiple used in 6 places.'>writeSuccess</a>);
<a name='L225'> 225         <font color='red'>}</font>
<a name='L226'> 226     <font color='red'>}</font>
<a name='L227'> 227     <b>else</b>
<a name='L228'> 228     <font color='red'>{</font>
<a name='L229'> 229         <i><font color='green'>// if the newest sample is too recent - _update_ it if significantly closer to the target temp</font></i>
<a name='L230'> 230         <b>if</b> (<a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a> - <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/2193.html' title='Multiple used in 11 places.'>TargetTemperature</a>) + <a href='../Y/3683.html' title='Multiple used in 2 places.'>minExtraDeltaT</a>
<a name='L231'> 231             &lt; <a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a> - <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/2193.html' title='Multiple used in 11 places.'>TargetTemperature</a>))
<a name='L232'> 232         <font color='red'>{</font>
<a name='L233'> 233             <i><font color='green'>// (do not update the time!)</font></i>
<a name='L234'> 234             <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a> = <a href='../S/128.html#L40' title='Defined at 40 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>GyroAutoTemperature</a>;
<a name='L235'> 235             <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a> = (<a href='../S/177.html#L555' title='Defined at 555 in ovr/sdk/src/Kernel/OVR_Math.h.'>Vector3d</a>) <a href='../Y/836.html' title='Multiple used in 7 places.'>GyroAutoOffset</a>;
<a name='L236'> 236             <a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> = <a href='../Y/2384.html' title='Multiple used in 4 places.'>VERSION</a>;
<a name='L237'> 237             <a href='../Y/4871.html' title='Multiple used in 6 places.'>writeSuccess</a> = <a href='../Y/3981.html' title='Multiple used in 41 places.'>pSensor</a>-&gt;<a href='../S/188.html#L692' title='Defined at 692 in ovr/sdk/src/OVR_Sensor2Impl.cpp.'>SetTemperatureReport</a>(<a href='../Y/3756.html' title='Multiple used in 10 places.'>newestReport</a>);
<a name='L238'> 238             <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4871.html' title='Multiple used in 6 places.'>writeSuccess</a>);
<a name='L239'> 239         <font color='red'>}</font>
<a name='L240'> 240     <font color='red'>}</font>
<a name='L241'> 241 
<a name='L242'> 242     <i><font color='green'>// update the interpolators with the new data</font></i>
<a name='L243'> 243     <i><font color='green'>// this is not particularly expensive call and would only happen rarely</font></i>
<a name='L244'> 244     <i><font color='green'>// but if performance is a problem, it's possible to only recompute the data that has changed</font></i>
<a name='L245'> 245     <b>if</b> (<a href='../Y/4871.html' title='Multiple used in 6 places.'>writeSuccess</a>)
<a name='L246'> 246         <b>for</b> (<b>int</b> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; 3; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L247'> 247             <a href='../Y/1011.html' title='Multiple used in 4 places.'>Interpolators</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../D/475.html' title='Multiple defined in 10 places.'>Initialize</a>(<a href='../Y/2199.html' title='Multiple used in 17 places.'>TemperatureReports</a>, <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>);
<a name='L248'> 248 <font color='red'>}</font>
<a name='L249'> 249 
<a name='L250'> 250 <b>const</b> <a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&amp; <a href='../S/128.html#L281' title='Refered from 281 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>median</a>(<b>const</b> <a href='../Y/62.html' title='Multiple used in 95 places.'>Array</a>&lt;<a href='../Y/2198.html' title='Multiple used in 7 places.'>TemperatureReport</a>&gt;&amp; <a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>, <b>int</b> <a href='../Y/2902.html' title='Multiple used in 10 places.'>coord</a>)
<a name='L251'> 251 <font color='red'>{</font>
<a name='L252'> 252     <a href='../Y/62.html' title='Multiple used in 95 places.'>Array</a>&lt;<b>double</b>&gt; <a href='../Y/4784.html' title='Multiple used in 26 places.'>values</a>;
<a name='L253'> 253     <a href='../Y/4784.html' title='Multiple used in 26 places.'>values</a>.<a href='../S/184.html#L629' title='Defined at 629 in ovr/sdk/src/Kernel/OVR_String.cpp.'>Reserve</a>(<a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>());
<a name='L254'> 254     <b>for</b> (<b>unsigned</b> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; <a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>(); <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L255'> 255         <b>if</b> (<a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a> != 0)
<a name='L256'> 256             <a href='../Y/4784.html' title='Multiple used in 26 places.'>values</a>.<a href='../Y/1729.html' title='Multiple used in 56 places.'>PushBack</a>(<a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>[<a href='../Y/2902.html' title='Multiple used in 10 places.'>coord</a>]);
<a name='L257'> 257     <b>if</b> (<a href='../Y/4784.html' title='Multiple used in 26 places.'>values</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>() &gt; 0)
<a name='L258'> 258     <font color='red'>{</font>
<a name='L259'> 259         <b>double</b> <a href='../Y/3666.html' title='Multiple used in 2 places.'>med</a> = <a href='../S/143.html#L33' title='Defined at 33 in ovr/sdk/src/OVR_SensorFilter.cpp.'>Median</a>(<a href='../Y/4784.html' title='Multiple used in 26 places.'>values</a>);
<a name='L260'> 260         <i><font color='green'>// this is kind of a hack</font></i>
<a name='L261'> 261         <b>for</b> (<b>unsigned</b> <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> = 0; <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a> &lt; <a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>(); <a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>++)
<a name='L262'> 262             <b>if</b> (<a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>].<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>[<a href='../Y/2902.html' title='Multiple used in 10 places.'>coord</a>] == <a href='../Y/3666.html' title='Multiple used in 2 places.'>med</a>)
<a name='L263'> 263                 <b>return</b> <a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>[<a href='../Y/3436.html' title='Multiple used in 682 places.'>i</a>];
<a name='L264'> 264         <i><font color='green'>// if we haven't found the median in the original array, something is wrong</font></i>
<a name='L265'> 265         <a href='../D/702.html' title='Multiple defined in 7 places.'>OVR_DEBUG_BREAK</a>;
<a name='L266'> 266     <font color='red'>}</font>
<a name='L267'> 267     <b>return</b> <a href='../Y/4565.html' title='Multiple used in 9 places.'>temperatureReportsBin</a>[0];
<a name='L268'> 268 <font color='red'>}</font>
<a name='L269'> 269 
<a name='L270'> 270 <b>void</b> <a href='../Y/1535.html' title='Multiple used in 4 places.'>OffsetInterpolator</a>::<a href='../R/458.html' title='Multiple refered from 25 places.'>Initialize</a>(<a href='../Y/62.html' title='Multiple used in 95 places.'>Array</a>&lt;<a href='../Y/62.html' title='Multiple used in 95 places.'>Array</a>&lt;<a href='../Y/2198.html' title='Multiple used in 7 places.'>TemperatureReport</a>&gt; &gt; <b>const</b>&amp; <a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>, <b>int</b> <a href='../Y/2902.html' title='Multiple used in 10 places.'>coord</a>)
<a name='L271'> 271 <font color='red'>{</font>
<a name='L272'> 272     <b>int</b> <a href='../Y/2755.html' title='Multiple used in 9 places.'>bins</a> = (<b>int</b>) <a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>();
<a name='L273'> 273     <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>.<a href='../D/113.html' title='Multiple defined in 3 places.'>Clear</a>();
<a name='L274'> 274     <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>.<a href='../S/184.html#L629' title='Defined at 629 in ovr/sdk/src/Kernel/OVR_String.cpp.'>Reserve</a>(<a href='../Y/2755.html' title='Multiple used in 9 places.'>bins</a>);
<a name='L275'> 275     <a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>.<a href='../D/113.html' title='Multiple defined in 3 places.'>Clear</a>();
<a name='L276'> 276     <a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>.<a href='../S/184.html#L629' title='Defined at 629 in ovr/sdk/src/Kernel/OVR_String.cpp.'>Reserve</a>(<a href='../Y/2755.html' title='Multiple used in 9 places.'>bins</a>);
<a name='L277'> 277 
<a name='L278'> 278     <b>for</b> (<b>int</b> <a href='../Y/2753.html' title='Multiple used in 5 places.'>bin</a> = 0; <a href='../Y/2753.html' title='Multiple used in 5 places.'>bin</a> &lt; <a href='../Y/2755.html' title='Multiple used in 9 places.'>bins</a>; <a href='../Y/2753.html' title='Multiple used in 5 places.'>bin</a>++)
<a name='L279'> 279     <font color='red'>{</font>
<a name='L280'> 280         <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>[<a href='../Y/2753.html' title='Multiple used in 5 places.'>bin</a>].<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>() == <a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>[0].<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>());
<a name='L281'> 281         <b>const</b> <a href='../S/108.html#L886' title='Defined at 886 in ovr/sdk/src/OVR_Device.h.'>TemperatureReport</a>&amp; <a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a> = <a href='../S/128.html#L250' title='Defined at 250 in ovr/sdk/src/OVR_SensorCalibration.cpp.'>median</a>(<a href='../Y/4564.html' title='Multiple used in 9 places.'>temperatureReports</a>[<a href='../Y/2753.html' title='Multiple used in 5 places.'>bin</a>], <a href='../Y/2902.html' title='Multiple used in 10 places.'>coord</a>);
<a name='L282'> 282         <b>if</b> (<a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> &gt; 0 &amp;&amp; <a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>.<a href='../Y/2401.html' title='Multiple used in 51 places.'>Version</a> &lt;= <a href='../Y/1330.html' title='Multiple used in 2 places.'>MAX_COMPAT_VERSION</a>)
<a name='L283'> 283         <font color='red'>{</font>
<a name='L284'> 284             <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>.<a href='../Y/1729.html' title='Multiple used in 56 places.'>PushBack</a>(<a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>.<a href='../Y/32.html' title='Multiple used in 12 places.'>ActualTemperature</a>);
<a name='L285'> 285             <a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>.<a href='../Y/1729.html' title='Multiple used in 56 places.'>PushBack</a>(<a href='../Y/4279.html' title='Multiple used in 12 places.'>report</a>.<a href='../Y/1534.html' title='Multiple used in 38 places.'>Offset</a>[<a href='../Y/2902.html' title='Multiple used in 10 places.'>coord</a>]);
<a name='L286'> 286         <font color='red'>}</font>
<a name='L287'> 287     <font color='red'>}</font>
<a name='L288'> 288 <font color='red'>}</font>
<a name='L289'> 289 
<a name='L290'> 290 <b>double</b> <a href='../Y/1535.html' title='Multiple used in 4 places.'>OffsetInterpolator</a>::<a href='../R/362.html' title='Multiple refered from 2 places.'>GetOffset</a>(<b>double</b> <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a>, <b>double</b> <a href='../Y/2729.html' title='Multiple used in 4 places.'>autoTemperature</a>, <b>double</b> <a href='../Y/2730.html' title='Multiple used in 5 places.'>autoValue</a>)
<a name='L291'> 291 <font color='red'>{</font>
<a name='L292'> 292     <b>const</b> <b>double</b> <a href='../Y/2728.html' title='Multiple used in 2 places.'>autoRangeExtra</a> = 1.0;
<a name='L293'> 293     <b>const</b> <b>double</b> <a href='../Y/3684.html' title='Multiple used in 4 places.'>minInterpolationDist</a> = 0.5;
<a name='L294'> 294 
<a name='L295'> 295     <i><font color='green'>// difference between current and autocalibrated temperature adjusted for preference over historical data</font></i>
<a name='L296'> 296     <b>const</b> <b>double</b> <a href='../Y/2688.html' title='Multiple used in 3 places.'>adjustedDeltaT</a> = <a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../Y/2729.html' title='Multiple used in 4 places.'>autoTemperature</a> - <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a>) - <a href='../Y/2728.html' title='Multiple used in 2 places.'>autoRangeExtra</a>;
<a name='L297'> 297 
<a name='L298'> 298     <b>int</b> <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> = (<b>int</b>) <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>.<a href='../Y/814.html' title='Multiple used in 145 places.'>GetSize</a>();
<a name='L299'> 299     <i><font color='green'>// handle special cases when we don't have enough data for proper interpolation</font></i>
<a name='L300'> 300     <b>if</b> (<a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> == 0)
<a name='L301'> 301         <b>return</b> <a href='../Y/2730.html' title='Multiple used in 5 places.'>autoValue</a>;
<a name='L302'> 302     <b>if</b> (<a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> == 1)
<a name='L303'> 303     <font color='red'>{</font>
<a name='L304'> 304         <b>if</b> (<a href='../Y/2688.html' title='Multiple used in 3 places.'>adjustedDeltaT</a> &lt; <a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[0] - <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a>))
<a name='L305'> 305             <b>return</b> <a href='../Y/2730.html' title='Multiple used in 5 places.'>autoValue</a>;
<a name='L306'> 306         <b>else</b>
<a name='L307'> 307             <b>return</b> <a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>[0];
<a name='L308'> 308     <font color='red'>}</font>
<a name='L309'> 309 
<a name='L310'> 310     <i><font color='green'>// first, find the interval that contains targetTemperature</font></i>
<a name='L311'> 311     <i><font color='green'>// if all points are on the same side of targetTemperature, find the adjacent interval</font></i>
<a name='L312'> 312     <b>int</b> <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>;
<a name='L313'> 313     <b>if</b> (<a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> &lt; <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[1])
<a name='L314'> 314         <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> = 0;
<a name='L315'> 315     <b>else</b> <b>if</b> (<a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> &gt;= <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 2])
<a name='L316'> 316         <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> = <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 2;
<a name='L317'> 317     <b>else</b>
<a name='L318'> 318         <b>for</b> (<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> = 1; <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> &lt; <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 2; <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>++)
<a name='L319'> 319             <b>if</b> (<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>] &lt;= <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> &amp;&amp; <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> &lt; <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>+1])
<a name='L320'> 320                 <b>break</b>;
<a name='L321'> 321     <b>int</b> <a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> = <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> + 1;
<a name='L322'> 322 
<a name='L323'> 323     <i><font color='green'>// extend the interval if it's too small and the interpolation is unreliable</font></i>
<a name='L324'> 324     <b>if</b> (<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>] &lt; <a href='../Y/3684.html' title='Multiple used in 4 places.'>minInterpolationDist</a>)
<a name='L325'> 325     <font color='red'>{</font>
<a name='L326'> 326         <b>if</b> (<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> &gt; 0 
<a name='L327'> 327             &amp;&amp; (<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> == <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 1 || <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> - 1] &lt; <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> + 1] - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>]))
<a name='L328'> 328             <a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>--;
<a name='L329'> 329         <b>else</b> <b>if</b> (<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> &lt; <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 1)
<a name='L330'> 330             <a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>++;
<a name='L331'> 331     <font color='red'>}</font>
<a name='L332'> 332 
<a name='L333'> 333     <i><font color='green'>// verify correctness</font></i>
<a name='L334'> 334     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> &gt;= 0 &amp;&amp; <a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> &lt; <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a>);
<a name='L335'> 335     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> == 0 || <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>] &lt;= <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a>);
<a name='L336'> 336     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> == <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 1 || <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> &lt; <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>]);
<a name='L337'> 337     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>((<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a> == 0 &amp;&amp; <a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a> == <a href='../Y/2916.html' title='Multiple used in 149 places.'>count</a> - 1) || <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>] &gt; <a href='../Y/3684.html' title='Multiple used in 4 places.'>minInterpolationDist</a>);
<a name='L338'> 338     <a href='../D/663.html' title='Multiple defined in 2 places.'>OVR_ASSERT</a>(<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>] &lt;= <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>]);
<a name='L339'> 339 
<a name='L340'> 340     <i><font color='green'>// perform the interpolation</font></i>
<a name='L341'> 341     <b>double</b> <a href='../Y/4424.html' title='Multiple used in 7 places.'>slope</a>;
<a name='L342'> 342     <b>if</b> (<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>] &gt;= <a href='../Y/3684.html' title='Multiple used in 4 places.'>minInterpolationDist</a>)
<a name='L343'> 343         <a href='../Y/4424.html' title='Multiple used in 7 places.'>slope</a> = (<a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>]) / (<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/3533.html' title='Multiple used in 57 places.'>l</a>]);
<a name='L344'> 344     <b>else</b>
<a name='L345'> 345         <i><font color='green'>// avoid a badly conditioned problem</font></i>
<a name='L346'> 346         <a href='../Y/4424.html' title='Multiple used in 7 places.'>slope</a> = 0;
<a name='L347'> 347     <b>if</b> (<a href='../Y/2688.html' title='Multiple used in 3 places.'>adjustedDeltaT</a> &lt; <a href='../Y/14.html' title='Multiple used in 18 places.'>Abs</a>(<a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] - <a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a>))
<a name='L348'> 348         <i><font color='green'>// use the autocalibrated value, if it's close</font></i>
<a name='L349'> 349         <b>return</b> <a href='../Y/2730.html' title='Multiple used in 5 places.'>autoValue</a> + <a href='../Y/4424.html' title='Multiple used in 7 places.'>slope</a> * (<a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> - <a href='../Y/2729.html' title='Multiple used in 4 places.'>autoTemperature</a>);
<a name='L350'> 350     <b>else</b>
<a name='L351'> 351         <b>return</b> <a href='../Y/2393.html' title='Multiple used in 19 places.'>Values</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>] + <a href='../Y/4424.html' title='Multiple used in 7 places.'>slope</a> * (<a href='../Y/4560.html' title='Multiple used in 14 places.'>targetTemperature</a> - <a href='../Y/2200.html' title='Multiple used in 19 places.'>Temperatures</a>[<a href='../Y/4681.html' title='Multiple used in 55 places.'>u</a>]);
<a name='L352'> 352 <font color='red'>}</font>
<a name='L353'> 353 
<a name='L354'> 354 <font color='red'>}</font> <i><font color='green'>// namespace OVR</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L40'>[^]</a><a href='#L290'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
